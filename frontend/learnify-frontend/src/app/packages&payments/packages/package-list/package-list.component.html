<div class="package-management">
  <h2 class="package-management__title">
    <i class="fas fa-box me-2"></i>
    Package Management
  </h2>
  
  <div class="package-management__header">
    <h4 class="package-management__subtitle">
      <i class="fas fa-list me-2"></i>
      All Packages
    </h4>
    <a routerLink="/admin/dashboard/create-package" class="package-management__button package-management__button--primary">
      <i class="fas fa-plus"></i>
      Create New Package
    </a>
  </div>

  <!-- Search Bar -->
  <div class="package-management__search">
    <div class="input-group">
      <input 
        type="text" 
        class="package-management__search-input" 
        placeholder="Search packages by name or description..." 
        [(ngModel)]="searchTerm" 
        (input)="applyFilter()">
      <button 
        class="package-management__search-btn" 
        type="button" 
        (click)="clearSearch()" 
        [disabled]="!searchTerm">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>

  <!-- Status Messages -->
  <div *ngIf="errorMessage" class="package-management__error">
    <span>
      <i class="fas fa-exclamation-circle me-2"></i>
      {{ errorMessage }}
    </span>
    <button type="button" class="package-management__button package-management__button--delete" (click)="errorMessage = ''">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <div *ngIf="successMessage" class="package-management__success">
    <span>
      <i class="fas fa-check-circle me-2"></i>
      {{ successMessage }}
    </span>
    <button type="button" class="package-management__button package-management__button--edit" (click)="successMessage = ''">
      <i class="fas fa-times"></i>
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="package-management__loader">
    <div class="package-management__spinner">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading packages...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="isEmpty && !isLoading" class="package-management__empty">
    <i class="fas fa-box-open package-management__empty-icon"></i>
    <h4 class="mt-3">No Packages Found</h4>
    <p>You haven't created any subscription packages yet.</p>
    <a class="package-management__button package-management__button--primary mt-3" routerLink="/admin/dashboard/create-package">
      <i class="fas fa-plus"></i>
      Create Your First Package
    </a>
  </div>

  <!-- Packages Table -->
  <div *ngIf="!isEmpty && !isLoading" class="package-management__table-wrapper">
    <table class="package-management__table">
      <thead class="package-management__table-header">
        <tr>
          <th><i class="fas fa-tag me-2"></i>Name</th>
          <th><i class="fas fa-align-left me-2"></i>Description</th>
          <th><i class="fas fa-dollar-sign me-2"></i>Price</th>
          <th><i class="fas fa-calendar-alt me-2"></i>Duration</th>
          <th class="text-end"><i class="fas fa-cogs me-2"></i>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let pkg of filteredPackages" class="package-management__table-row">
          <td class="package-management__table-cell">{{ pkg.name }}</td>
          <td class="package-management__table-cell">{{ pkg.description | truncate:50 }}</td>
          <td class="package-management__table-cell">
            <span class="package-management__price">${{ pkg.price }}</span>
          </td>
          <td class="package-management__table-cell">
            <span class="package-management__duration">
              <i class="fas fa-clock me-1"></i>
              {{ pkg.duration_days }} days
            </span>
          </td>
          <td class="package-management__table-cell">
            <div class="package-management__actions">
              <button class="package-management__button package-management__button--edit" (click)="onEdit(pkg)">
                <i class="fas fa-edit"></i>
                Edit
              </button>
              <button class="package-management__button package-management__button--delete" (click)="onDelete(pkg)">
                <i class="fas fa-trash"></i>
                Delete
              </button>
            </div>
          </td>
        </tr>
        <tr *ngIf="filteredPackages.length === 0 && !isEmpty">
          <td colspan="5" class="text-center py-4">
            <i class="fas fa-search me-2"></i>
            No packages match your search criteria.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>