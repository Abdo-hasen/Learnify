<!-- Reset Password Container -->
<div class="container">
  <div class="login-container">
    <div class="row">
      <!-- Left Side with Form -->
      <div class="col-md-6 left-side">
        <!-- Header with Logo and Navigation -->
        <div class="header-row">
          <div class="logo">
            <div class="logo-icon">
              <span style="color: var(--dark-purple); font-weight: bold; font-size: 22px;">L</span>
            </div>
            <div class="logo-text">Learnify</div>
          </div>
          <div class="nav-link">
            <a routerLink="/" class="btn"><i class="fas fa-arrow-left"></i> Back to Login</a>
          </div>
        </div>
        
        <!-- Page Heading -->
        <h2>Reset Password</h2>
        <p class="subheading">Create a new secure password for your Learnify account</p>
        
        <!-- Status Messages (Error/Success) -->
        <div *ngIf="errorMessage" class="alert alert-danger">
          {{ errorMessage }}
        </div>
        <div *ngIf="successMessage" class="alert alert-success">
          {{ successMessage }}
        </div>
        
        <!-- Reset Password Form -->
        <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" *ngIf="!successMessage">
          <!-- Password Field -->
          <div class="input-group password-field">
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              class="input-field" 
              id="password" 
              placeholder=" " 
              formControlName="password"
              [ngClass]="{'is-invalid': submitAttempted && f['password'].errors}"
            >
            <label for="password" class="input-label">New Password</label>
            <i 
              class="password-toggle fas" 
              [class.fa-eye]="showPassword" 
              [class.fa-eye-slash]="!showPassword" 
              (click)="togglePasswordVisibility()"
            ></i>
            
            <!-- Password Validation Message -->
            <div class="validation-message" *ngIf="submitAttempted && f['password'].errors">
              <span *ngIf="f['password'].errors['required']">Password is required</span>
              <span *ngIf="f['password'].errors['minlength']">Password must be at least 8 characters</span>
            </div>
          </div>
          
          <!-- Confirm Password Field -->
          <div class="input-group password-field">
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              class="input-field" 
              id="password_confirmation" 
              placeholder=" " 
              formControlName="password_confirmation"
              [ngClass]="{'is-invalid': submitAttempted && (f['password_confirmation'].errors || resetForm.hasError('passwordMismatch'))}"
            >
            <label for="password_confirmation" class="input-label">Confirm Password</label>
            
            <!-- Confirm Password Validation Message -->
            <div class="validation-message" *ngIf="submitAttempted && (f['password_confirmation'].errors || resetForm.hasError('passwordMismatch'))">
              <span *ngIf="f['password_confirmation'].errors?.['required']">Please confirm your password</span>
              <span *ngIf="resetForm.hasError('passwordMismatch')">Passwords do not match</span>
            </div>
          </div>
          
          <!-- Submit Button -->
          <button 
            type="submit" 
            class="btn signin-btn" 
            [disabled]="isLoading"
          >
            <span *ngIf="!isLoading">Reset Password</span>
            <span *ngIf="isLoading">
              <i class="fas fa-spinner fa-spin"></i> Processing...
            </span>
          </button>
          
          <!-- Form Footer -->
          <div class="text-center mt-4">
            <p>Remember your password? <a routerLink="/" class="forgot-link">Sign In</a></p>
          </div>
        </form>
      </div>
      
      <!-- Right Side with Illustration -->
      <div class="col-md-6 right-side">
        <div class="single-image-container">
          <img 
            src="assets/pics/reset-password.png" 
            alt="Reset Password" 
            class="story-image"
            (error)="handleImageError($event, 'https://via.placeholder.com/500x500.png?text=Reset+Password')" 
          />
        </div>
      </div>
    </div>
  </div>
</div>
